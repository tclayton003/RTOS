

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.3. Software Update in Orbit &mdash; A3200 Board Support Package 2.6.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="A3200 Board Support Package 2.6.3 documentation" href="../../../index.html"/>
        <link rel="up" title="3.1. A3200 (liba3200)" href="liba3200.html"/>
        <link rel="next" title="3.1.4. Parameters" href="parameters.html"/>
        <link rel="prev" title="3.1.2. Drivers and API" href="drivers_api.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../doc/index.html" class="icon icon-home"> A3200 Board Support Package
          

          
          </a>

          
            
            
              <div class="version">
                2.6.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/a3200-bsp.html">1. A3200 BSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/a3200_toolchain.html">2. Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/libraries.html">3. Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/tools.html">4. Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/appendix/appendix.html">5. Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc/zrefs.html">6. Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../doc/index.html">A3200 Board Support Package</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../doc/index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../doc/libraries.html">3. Libraries</a> &raquo;</li>
      
          <li><a href="liba3200.html">3.1. A3200 (liba3200)</a> &raquo;</li>
      
    <li>3.1.3. Software Update in Orbit</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-update-in-orbit">
<h1>3.1.3. Software Update in Orbit<a class="headerlink" href="#software-update-in-orbit" title="Permalink to this headline">¶</a></h1>
<p>It is possible to upload new software to the NanoMind A3200 in orbit. The new image(s) will be loaded into RAM and executed from RAM.
Is is possible to have two RAM software images, where the second can be used as fallback in case the first fails.
The original internal flash will also not be changed, so you always have this as another fallback option.</p>
<p>The procedure is:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Compile the new software for a RAM image. You need to use the <code class="docutils literal"><span class="pre">waf</span> <span class="pre">configure</span> <span class="pre">--ram</span></code> command to specify that you want to build the RAM image. When the RAM image has been built, you have a nanomind_ram.bin in the build folder.</li>
<li>Upload the new RAM image nanomind_ram.bin to the NanoMind flash file system using <span class="xref std std-ref">libftp</span>, upload to e.g. <code class="docutils literal"><span class="pre">/flash/new_image.bin</span></code>.</li>
<li>When the new image is uploaded and stored on the flash file system, you reconfigure the NanoMind to boot from the new image and how many times you will allow the NanoMind to boot from the new RAM image (this is a security mechanism to handle if a new RAM image fails to boot reliably). To do this, set the parameters <code class="docutils literal"><span class="pre">swload_img1</span></code> and <code class="docutils literal"><span class="pre">swload_cnt1</span></code>, eg <code class="docutils literal"><span class="pre">param</span> <span class="pre">set</span> <span class="pre">swload_img1</span> <span class="pre">&quot;/flash/new_image.bin&quot;</span></code> and <code class="docutils literal"><span class="pre">param</span> <span class="pre">set</span> <span class="pre">swload_cnt1</span> <span class="pre">10</span></code> to allow the new image to boot 10 times before reverting to the secondary image.</li>
<li>If the image is considdered a <code class="docutils literal"><span class="pre">golden</span> <span class="pre">image</span></code> then it can be set as a fallback RAM image. This is done using the parameters <code class="docutils literal"><span class="pre">swload_img2</span></code> and <code class="docutils literal"><span class="pre">swload_cnt2</span></code>, e.g. <code class="docutils literal"><span class="pre">param</span> <span class="pre">set</span> <span class="pre">swload_img2</span> <span class="pre">&quot;/flash/golden_image.bin&quot;</span></code> and <code class="docutils literal"><span class="pre">param</span> <span class="pre">set</span> <span class="pre">swload_cnt2</span> <span class="pre">10</span></code>.</li>
<li>Reboot NanoMind. When the NanoMind reboots from flash, it will detect that it needs to load the new RAM image (<code class="docutils literal"><span class="pre">/flash/new_image.bin</span></code>) to RAM and continue booting the new image. It will decrease the <code class="docutils literal"><span class="pre">swload_cnt1</span></code> parameter by 1 everytime it attempts to boot the RAM image.</li>
<li>In case the <code class="docutils literal"><span class="pre">swload_img1</span></code> fails to load or <code class="docutils literal"><span class="pre">swload_cnt1</span></code> has reached zero, then the <code class="docutils literal"><span class="pre">swload_img2</span></code> will be booted (if <code class="docutils literal"><span class="pre">swload_cnt2</span></code> did not reach zero).</li>
<li>If both image1 and image2 load count has reached zero or fails to load, the flash image is kept running as fallback.</li>
</ol>
</div></blockquote>
<p>The parameters <code class="docutils literal"><span class="pre">swload_img1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> and <code class="docutils literal"><span class="pre">swload_cnt1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> are defined in the configuration table <a class="reference internal" href="parameters.html#table-gs-a3200-configuration"><span class="std std-ref">Parameter Table ‘configuration’</span></a>.</p>
<p>The <code class="docutils literal"><span class="pre">swload_cnt1</span> <span class="pre">&amp;</span> <span class="pre">2</span></code> maximum value is 100. It is defined by <code class="docutils literal"><span class="pre">MAX_SWLOAD_COUNT</span></code> in <cite>src/sdk/swload.c</cite> and can be changed if higher or lower value is required.</p>
<p>The boot from RAM image procedure is handled by the <code class="docutils literal"><span class="pre">gs_a3200_sdk_swload_task()</span></code> task. This task is started from the <code class="docutils literal"><span class="pre">gs_a3200_sdk_init_task()</span></code> (in <cite>src/sdk/sdk_init.c</cite>), once the file system is mounted successfully.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="parameters.html" class="btn btn-neutral float-right" title="3.1.4. Parameters" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="drivers_api.html" class="btn btn-neutral" title="3.1.2. Drivers and API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023 GomSpace A/S..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'2.6.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>